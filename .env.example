# ============================================
# Monolith 环境变量配置示例文件
# ============================================
# 
# 使用方法：
# 1. 复制此文件为 .env: cp .env.example .env
# 2. 根据你的环境需求修改对应的配置值
# 3. 重启应用程序使配置生效
#
# 配置优先级（从高到低）：
# 命令行参数 > 环境变量 > 配置文件 > 默认值
#
# 环境文件加载顺序：
# .env.local > .env.development > .env.production > .env

# ============================================
# 核心系统配置 (Core Configuration)
# ============================================

# 应用运行模式
# 可选值: development, staging, production
# 影响: 日志详细程度、错误处理方式、性能优化等
MONOLITH_MODE=development

# 日志级别控制
# 可选值: trace, debug, info, warn, error
# trace: 最详细，包含所有调试信息
# debug: 调试信息，用于开发环境
# info: 一般信息，推荐生产环境使用
# warn: 警告信息，只显示重要问题
# error: 错误信息，只显示严重错误
MONOLITH_LOG_LEVEL=info

# 禁用彩色输出
# 设置为任何值都会禁用彩色输出，适用于日志文件或CI环境
# NO_COLOR=1

# ============================================
# 翻译系统配置 (Translation Configuration)
# ============================================

# 翻译功能总开关
# true: 启用翻译功能
# false: 禁用翻译功能，直接返回原始内容
MONOLITH_TRANSLATION_ENABLED=true

# 目标语言设置
# 使用 ISO 639-1 语言代码（2个字符）
# 常用值: zh(中文), en(英文), ja(日文), ko(韩文), fr(法文), de(德文), es(西班牙文)
MONOLITH_TRANSLATION_TARGET_LANG=zh

# 源语言设置
# auto: 自动检测源语言（推荐）
# 或使用具体的 ISO 639-1 语言代码
MONOLITH_TRANSLATION_SOURCE_LANG=auto

# 翻译API端点URL
# 支持本地DeepLX服务或远程翻译API
# 本地服务: http://localhost:1188/translate
# 远程服务: https://api.example.com/translate
MONOLITH_TRANSLATION_API_URL=http://localhost:1188/translate

# API请求速率限制
# 每秒最大请求数，防止API过载
# 范围: 0.1 - 1000.0 (支持小数)
# 建议: 本地服务 10-50, 远程服务 1-10
MONOLITH_TRANSLATION_MAX_REQUESTS_PER_SECOND=5.0

# 最大并发请求数
# 同时进行的翻译请求数量
# 范围: 1 - 100
# 影响: 更高的并发可以提升速度，但会增加API负载
MONOLITH_TRANSLATION_MAX_CONCURRENT_REQUESTS=10

# 批次处理大小
# 单个翻译批次的最大字符数
# 范围: 100 - 50000
# 建议: DeepLX 5000-10000, 其他API 1000-3000
MONOLITH_TRANSLATION_BATCH_SIZE=9000

# 批次处理超时时间（秒）
# 单个批次的最大等待时间
# 范围: 1 - 300 秒
# 建议: 本地服务 30-60秒, 远程服务 60-120秒
MONOLITH_TRANSLATION_BATCH_TIMEOUT=30

# ============================================
# 缓存系统配置 (Cache Configuration)
# ============================================

# 缓存功能总开关
# true: 启用缓存，提升性能和减少API调用
# false: 禁用缓存，每次都重新翻译
MONOLITH_CACHE_ENABLED=true

# 本地缓存大小
# 内存中保存的翻译结果数量
# 范围: 10 - 100000
# 影响: 更大的缓存提升命中率，但占用更多内存
# 建议: 开发环境 1000, 生产环境 5000-10000
MONOLITH_CACHE_LOCAL_SIZE=1000

# 缓存过期时间（秒）
# 翻译结果在缓存中的保存时间
# 范围: 60 - 604800 (1分钟 - 7天)
# 建议: 1小时(3600) - 24小时(86400)
MONOLITH_CACHE_TTL=3600

# 缓存预热功能
# true: 启动时预加载常用翻译结果
# false: 不进行预热，按需加载
# 注意: 预热会增加启动时间，但提升首次访问性能
MONOLITH_CACHE_WARMUP_ENABLED=false

# ============================================
# Web服务器配置 (Web Server Configuration)
# ============================================

# 服务器绑定地址
# 127.0.0.1: 只允许本地访问
# 0.0.0.0: 允许所有网络接口访问
# 具体IP: 绑定到特定网络接口
MONOLITH_WEB_BIND_ADDRESS=127.0.0.1

# 服务器监听端口
# 范围: 1024-65535 (小于1024需要root权限)
# 常用: 7080(默认), 8080, 3000, 8000
MONOLITH_WEB_PORT=7080

# 静态文件目录
# 相对路径: 相对于可执行文件位置
# 绝对路径: 完整的文件系统路径
# 空值: 禁用静态文件服务
MONOLITH_WEB_STATIC_DIR=static

# ============================================
# MongoDB配置 (仅在启用Web功能时使用)
# ============================================

# MongoDB连接字符串
# 本地: mongodb://localhost:27017
# 认证: mongodb://username:password@host:port/database
# 集群: mongodb+srv://username:password@cluster.mongodb.net/database
MONGODB_URL=mongodb://localhost:27017

# 数据库名称
# 用于存储翻译缓存和页面数据
MONGODB_DATABASE=monolith

# 集合名称
# 翻译缓存数据的集合名称
MONGODB_COLLECTION=html_cache

# ============================================
# 性能优化配置 (Performance Configuration)
# ============================================

# 工作线程数量
# 留空: 使用CPU核心数
# 指定数量: 1-128
# 影响: 并行处理能力，但也影响内存使用
# MONOLITH_WORKER_THREADS=4

# 最大内存使用限制（MB）
# 范围: 64 - 32768
# 用于控制应用程序的内存消耗
# 建议: 开发环境 512MB, 生产环境 1024-2048MB
MONOLITH_MAX_MEMORY_MB=512

# 启用并行处理
# true: 启用多线程并行处理，提升性能
# false: 使用单线程处理，降低资源消耗
MONOLITH_PARALLEL_ENABLED=true

# ============================================
# 安全配置 (Security Configuration)
# ============================================

# API认证密钥
# 留空: 不需要认证
# 设置值: 启用API密钥认证（最少8个字符）
# 注意: 生产环境建议启用认证
# MONOLITH_API_KEY=your-secret-api-key-here

# CORS允许的源地址
# *: 允许所有来源（开发环境）
# 具体域名: http://localhost:3000,https://example.com
# 多个域名用逗号分隔
MONOLITH_CORS_ORIGINS=*

# ============================================
# 开发环境专用配置
# ============================================

# 开发环境示例配置
# MONOLITH_MODE=development
# MONOLITH_LOG_LEVEL=debug
# MONOLITH_TRANSLATION_MAX_REQUESTS_PER_SECOND=10.0
# MONOLITH_CACHE_LOCAL_SIZE=500
# MONOLITH_WEB_BIND_ADDRESS=127.0.0.1
# MONOLITH_WEB_PORT=8080

# ============================================
# 生产环境配置示例
# ============================================

# 生产环境高性能配置示例（取消注释使用）
# MONOLITH_MODE=production
# MONOLITH_LOG_LEVEL=warn
# MONOLITH_TRANSLATION_MAX_REQUESTS_PER_SECOND=20.0
# MONOLITH_TRANSLATION_MAX_CONCURRENT_REQUESTS=20
# MONOLITH_TRANSLATION_BATCH_SIZE=15000
# MONOLITH_CACHE_LOCAL_SIZE=10000
# MONOLITH_CACHE_TTL=86400
# MONOLITH_MAX_MEMORY_MB=2048
# MONOLITH_WEB_BIND_ADDRESS=0.0.0.0
# MONOLITH_WEB_PORT=80
# MONOLITH_API_KEY=production-secret-key

# ============================================
# Docker容器化配置示例
# ============================================

# Docker环境配置示例
# MONOLITH_MODE=production
# MONOLITH_WEB_BIND_ADDRESS=0.0.0.0
# MONOLITH_WEB_PORT=7080
# MONGODB_URL=mongodb://mongo:27017
# MONOLITH_TRANSLATION_API_URL=http://deeplx:1188/translate

# ============================================
# 故障排除和调试
# ============================================

# 调试模式配置
# MONOLITH_MODE=development
# MONOLITH_LOG_LEVEL=debug
# MONOLITH_TRANSLATION_ENABLED=true
# MONOLITH_CACHE_ENABLED=false  # 禁用缓存便于调试
# MONOLITH_TRANSLATION_MAX_REQUESTS_PER_SECOND=1.0  # 降低请求速率
# MONOLITH_TRANSLATION_MAX_CONCURRENT_REQUESTS=1    # 单线程调试

# ============================================
# 配置验证和测试
# ============================================

# 配置测试示例
# 1. 测试翻译API连接:
#    curl http://localhost:1188/translate -d '{"text":"hello","source_lang":"en","target_lang":"zh"}'
#
# 2. 测试Web服务器:
#    curl http://127.0.0.1:7080/health
#
# 3. 测试MongoDB连接:
#    mongosh mongodb://localhost:27017/monolith
#
# 4. 验证环境变量加载:
#    cargo run --example env_demo --features="web,translation"

# ============================================
# 常见配置场景
# ============================================

# 场景1: 本地开发环境
# MONOLITH_MODE=development
# MONOLITH_LOG_LEVEL=debug
# MONOLITH_TRANSLATION_API_URL=http://localhost:1188/translate
# MONOLITH_WEB_PORT=8080
# MONOLITH_CACHE_LOCAL_SIZE=500

# 场景2: 测试环境
# MONOLITH_MODE=staging
# MONOLITH_LOG_LEVEL=info
# MONOLITH_TRANSLATION_API_URL=http://test-deeplx:1188/translate
# MONOLITH_WEB_BIND_ADDRESS=0.0.0.0
# MONOLITH_API_KEY=test-environment-key

# 场景3: 高负载生产环境
# MONOLITH_MODE=production
# MONOLITH_LOG_LEVEL=warn
# MONOLITH_TRANSLATION_MAX_REQUESTS_PER_SECOND=50.0
# MONOLITH_TRANSLATION_MAX_CONCURRENT_REQUESTS=30
# MONOLITH_CACHE_LOCAL_SIZE=20000
# MONOLITH_MAX_MEMORY_MB=4096
# MONOLITH_WORKER_THREADS=16

# ============================================
# 重要提醒
# ============================================

# 1. 敏感信息处理:
#    - 不要将包含敏感信息的 .env 文件提交到代码仓库
#    - 生产环境使用 Secrets 管理敏感配置
#    - API密钥和数据库密码应该通过安全方式传递

# 2. 性能调优建议:
#    - 根据服务器性能调整并发数和缓存大小
#    - 监控内存使用情况，适当调整最大内存限制
#    - 定期检查翻译API的响应时间，调整超时设置

# 3. 安全注意事项:
#    - 生产环境不要使用 0.0.0.0 绑定地址除非必要
#    - 启用API密钥认证保护服务
#    - 定期更新和轮换API密钥

# 4. 监控和日志:
#    - 生产环境建议使用 warn 或 error 日志级别
#    - 配置日志文件轮转避免磁盘空间不足
#    - 监控翻译API的调用频率和成功率