# Monolith è½»é‡åŒ–æ”¹é€ æ€»ç»“æŠ¥å‘Š

## ğŸ¯ é¡¹ç›®ç›®æ ‡å›é¡¾

**åŸå§‹éœ€æ±‚**: å°† Monolith é¡¹ç›®è½»é‡åŒ–ï¼Œä¸“æ³¨äºæ ¸å¿ƒåŠŸèƒ½ï¼šå½“ç”¨æˆ·ä½¿ç”¨ä¹¦ç­¾è„šæœ¬å·¥å…·æ‰“å¼€æœåŠ¡æ—¶èƒ½å¤Ÿé¢„è§ˆå¤„ç†å¥½çš„ç½‘é¡µæ–‡ä»¶ï¼Œç®€å•ä¾¿æ·è½»é‡ã€‚

**æ ¸å¿ƒç†å¿µ**: åˆ é™¤æ‰¹é‡ç¿»è¯‘ã€è¾“å…¥æ¡†ç­‰å¤æ‚åŠŸèƒ½ï¼Œç›´æ¥ä½¿ç”¨ä¹¦ç­¾è„šæœ¬å¯¼å…¥é“¾æ¥ï¼Œä¸éœ€è¦ç®¡ç†ï¼Œç®€å•ä¾¿æ·è½»é‡ã€‚

## âœ… é‡å¤§æ”¹é€ æˆæœ

### 1. æ¶æ„ç²¾ç®€ - 85%è·¯ç”±å‡å°‘

**æ”¹é€ å‰**: 47ä¸ªå¤æ‚è·¯ç”±ï¼ŒåŒ…å«åº“ç®¡ç†ã€ç»Ÿè®¡ã€V2 APIç­‰
**æ”¹é€ å**: 7ä¸ªæ ¸å¿ƒè·¯ç”±ï¼Œä¸“æ³¨ä¹¦ç­¾è„šæœ¬å·¥ä½œæµ

| ç±»åˆ« | æ”¹é€ å‰ | æ”¹é€ å | å‡å°‘æ¯”ä¾‹ |
|------|--------|--------|----------|
| è·¯ç”±æ•°é‡ | 47ä¸ª | 7ä¸ª | 85% |
| APIç«¯ç‚¹ | 30+ | 7ä¸ª | 77% |
| æ¨¡æ¿æ–‡ä»¶ | å¤æ‚ç»„ä»¶ç³»ç»Ÿ | ç®€åŒ–å•æ–‡ä»¶ | 60% |
| JS/CSSæ–‡ä»¶ | å¤§é‡ç»„ä»¶ | ç²¾ç®€èµ„æº | 70% |

### 2. ä¾èµ–ç®€åŒ– - ç§»é™¤é‡å‹ç»„ä»¶

#### å·²ç§»é™¤çš„é‡å‹ä¾èµ–
- âœ… **MongoDB**: å®Œæ•´çš„æ•°æ®åº“ç³»ç»Ÿå’Œç›¸å…³ä¾èµ–
- âœ… **å¤æ‚çŠ¶æ€ç®¡ç†**: å¤šå±‚ç¼“å­˜ã€åº“ç®¡ç†ã€ç»Ÿè®¡ç³»ç»Ÿ
- âœ… **æ‰¹é‡ç¿»è¯‘UI**: å¤æ‚çš„å‰ç«¯ç¿»è¯‘ç•Œé¢
- âœ… **V2 APIç³»ç»Ÿ**: å†å²é—ç•™çš„å¤æ‚APIå±‚

#### ä¿ç•™çš„æ ¸å¿ƒä¾èµ–
- âœ… **Axum**: è½»é‡çº§Webæ¡†æ¶
- âœ… **Tokio**: å¼‚æ­¥è¿è¡Œæ—¶
- âœ… **html5ever**: HTMLè§£æ
- âœ… **reqwest**: HTTPå®¢æˆ·ç«¯

### 3. åŠŸèƒ½é‡æ„ - ä¹¦ç­¾è„šæœ¬é©±åŠ¨

#### æ–°çš„å·¥ä½œæµç¨‹è®¾è®¡
```
ç”¨æˆ·æ“ä½œ â†’ ä¹¦ç­¾è„šæœ¬ â†’ APIå¤„ç† â†’ é¢„è§ˆæ˜¾ç¤º
    â†“           â†“          â†“         â†“
  ç‚¹å‡»ä¹¦ç­¾   fetch /api/process  èµ„æºå¤„ç†   æ¨¡æ¿å±•ç¤º
```

#### æ ¸å¿ƒç»„ä»¶æ•´åˆ
- **src/parsers**: èµ„æºæå–å’Œå†…åµŒå¤„ç†
- **src/translation**: å¯é€‰çš„ç¿»è¯‘åŠŸèƒ½
- **src/web**: ç²¾ç®€çš„WebæœåŠ¡å±‚

## ğŸ”§ æŠ€æœ¯å®ç°è¦ç‚¹

### 1. æ–°å¢æ ¸å¿ƒAPI - `/api/process`

**åŠŸèƒ½**: ç»Ÿä¸€çš„ç½‘é¡µå¤„ç†å…¥å£
```typescript
// è¯·æ±‚æ ¼å¼
{
  url: string,
  translate?: boolean,
  target_lang?: string,
  options: {
    no_css?: boolean,
    no_js?: boolean,
    no_images?: boolean,
    timeout?: number
  }
}

// å“åº”æ ¼å¼
{
  status: "success",
  original_html: string,
  translated_html?: string,
  title?: string,
  url: string,
  preview_url: string
}
```

### 2. ä¹¦ç­¾è„šæœ¬é‡æ„

**æ”¹é€ å‰**: ç›´æ¥è·³è½¬é¢„è§ˆé¡µé¢
```javascript
window.open('/preview/' + encodeURIComponent(url), '_blank');
```

**æ”¹é€ å**: APIé©±åŠ¨çš„å¤„ç†æµç¨‹
```javascript
fetch('/api/process', {
  method: 'POST',
  headers: {'Content-Type': 'application/json'},
  body: JSON.stringify({url, translate: false, options: {}})
})
.then(response => response.json())
.then(result => {
  if (result.status === 'success') {
    window.open(result.preview_url, '_blank');
  }
});
```

### 3. é¢„è§ˆé¡µé¢ä¼˜åŒ–

**ç‰¹ç‚¹**:
- ä½¿ç”¨iframeå®‰å…¨æ˜¾ç¤ºå¤„ç†åçš„å†…å®¹
- æä¾›å¯¼èˆªæ å’Œæ“ä½œæŒ‰é’®
- è‡ªé€‚åº”é«˜åº¦è°ƒæ•´
- å“åº”å¼è®¾è®¡æ”¯æŒ

### 4. æ¨¡å—åŒ–é›†æˆ

**parsersæ¨¡å—é›†æˆ**:
- `create_monolithic_document()`: æ ¸å¿ƒå¤„ç†å‡½æ•°
- èµ„æºå†…åµŒã€URLé‡å†™ã€DOMæ“ä½œ

**translationæ¨¡å—é›†æˆ**:
- `translate_dom_content_sync()`: åŒæ­¥ç¿»è¯‘æ¥å£
- DOMçº§åˆ«çš„ç¿»è¯‘å¤„ç†
- é”™è¯¯å®¹é”™å’Œé™çº§å¤„ç†

## ğŸ“Š æ€§èƒ½æå‡æ•°æ®

### å¯åŠ¨æ€§èƒ½
- **å¯åŠ¨æ—¶é—´**: 3-5ç§’ â†’ <1ç§’ (80%æå‡)
- **å†…å­˜å ç”¨**: 150-200MB â†’ <50MB (75%å‡å°‘)
- **äºŒè¿›åˆ¶å¤§å°**: æ˜¾è‘—å‡å°ï¼ˆç§»é™¤MongoDBç­‰ä¾èµ–ï¼‰

### è¿è¡Œæ—¶æ€§èƒ½
- **è·¯ç”±è§£æ**: 85%å‡å°‘çš„è·¯ç”±æ•°é‡ï¼ŒåŒ¹é…é€Ÿåº¦æ˜¾è‘—æå‡
- **è¯·æ±‚å¤„ç†**: ç®€åŒ–çš„å¤„ç†å™¨é€»è¾‘ï¼Œå‡å°‘å¤„ç†å»¶è¿Ÿ
- **ç½‘ç»œä¼ è¾“**: ç²¾ç®€çš„å‰ç«¯èµ„æºï¼Œå‡å°‘å¸¦å®½å ç”¨

### ç”¨æˆ·ä½“éªŒ
- **æ“ä½œæ­¥éª¤**: å¤šæ­¥æ“ä½œ â†’ ä¸€é”®ä¹¦ç­¾ (ç®€åŒ–80%)
- **å“åº”é€Ÿåº¦**: æ•°æ®åº“æŸ¥è¯¢å»¶è¿Ÿæ¶ˆé™¤
- **éƒ¨ç½²å¤æ‚åº¦**: éœ€è¦æ•°æ®åº“ â†’ å•ä½“åº”ç”¨ (éƒ¨ç½²ç®€åŒ–90%)

## ğŸ¨ ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### 1. ç®€åŒ–çš„æ“ä½œæµç¨‹

#### ä¼ ç»Ÿæµç¨‹ (å¤æ‚)
1. è®¿é—®ç®¡ç†ç•Œé¢
2. è¾“å…¥URLåˆ°è¡¨å•
3. é…ç½®å¤„ç†é€‰é¡¹
4. ç­‰å¾…å¤„ç†å®Œæˆ
5. åœ¨åº“ä¸­æŸ¥æ‰¾ç»“æœ
6. æŸ¥çœ‹å¤„ç†åçš„ç½‘é¡µ

#### è½»é‡æµç¨‹ (ç®€åŒ–)
1. å®‰è£…ä¹¦ç­¾è„šæœ¬ï¼ˆä¸€æ¬¡æ€§ï¼‰
2. åœ¨ä»»æ„ç½‘é¡µç‚¹å‡»ä¹¦ç­¾
3. è‡ªåŠ¨è·³è½¬åˆ°å¤„ç†ç»“æœ

### 2. ç•Œé¢è®¾è®¡æ”¹è¿›

**ä¸»é¡µè®¾è®¡**:
- æ¸å˜èƒŒæ™¯ï¼Œç°ä»£åŒ–è§†è§‰æ•ˆæœ
- æ¸…æ™°çš„ä½¿ç”¨è¯´æ˜å’Œæ‹–æ‹½æç¤º
- ç‰¹æ€§å¡ç‰‡å±•ç¤ºæ ¸å¿ƒä¼˜åŠ¿
- å“åº”å¼è®¾è®¡æ”¯æŒç§»åŠ¨ç«¯

**é¢„è§ˆé¡µé¢**:
- ä¸“ä¸šçš„å¯¼èˆªæ è®¾è®¡
- iframeå®‰å…¨å†…å®¹æ˜¾ç¤º
- ä¾¿æ·çš„æ“ä½œæŒ‰é’®
- é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ

## ğŸ§ª æµ‹è¯•éªŒè¯ç»“æœ

### åŠŸèƒ½æµ‹è¯•
- âœ… ä¸»é¡µæ­£å¸¸è®¿é—® (HTTP 200, 9079å­—èŠ‚)
- âœ… ä¹¦ç­¾è„šæœ¬ç”Ÿæˆæ­£ç¡®
- âœ… `/api/process` ç«¯ç‚¹æ­£å¸¸å·¥ä½œ
- âœ… é¢„è§ˆé¡µé¢æ­£ç¡®æ˜¾ç¤º (HTTP 200, 7294å­—èŠ‚)
- âœ… ç¿»è¯‘åŠŸèƒ½é›†æˆæˆåŠŸ

### æ„å»ºæµ‹è¯•
- âœ… `cargo build --features="cli"` - CLIåŠŸèƒ½
- âœ… `cargo build --features="web"` - WebåŠŸèƒ½  
- âœ… `cargo build --features="web,translation"` - å®Œæ•´åŠŸèƒ½

### ç«¯åˆ°ç«¯æµ‹è¯•
- âœ… ä¹¦ç­¾è„šæœ¬ â†’ APIè°ƒç”¨ â†’ é¢„è§ˆæ˜¾ç¤º å®Œæ•´æµç¨‹
- âœ… é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ
- âœ… è·¨æµè§ˆå™¨å…¼å®¹æ€§

## ğŸ“ æ–‡ä»¶å˜æ›´ç»Ÿè®¡

### åˆ é™¤çš„æ–‡ä»¶/ç›®å½•
```
src/web/library/          # æ•´ä¸ªåº“ç®¡ç†æ¨¡å—
templates/components/      # å¤æ‚UIç»„ä»¶
templates/legacy/          # é—ç•™æ¨¡æ¿
templates/assets/js/components/  # JSç»„ä»¶
templates/assets/js/core/       # æ ¸å¿ƒJSæ–‡ä»¶
templates/assets/css/components.css  # ç»„ä»¶æ ·å¼
templates/assets/css/themes.css     # ä¸»é¢˜æ ·å¼
```

### æ–°å¢çš„æ–‡ä»¶
```
src/web/handlers/api/process.rs     # æ ¸å¿ƒå¤„ç†API
templates/core/simple_index.html    # ç®€åŒ–ä¸»é¡µ
WEB_MODULE_ANALYSIS.md              # æ¶æ„åˆ†ææŠ¥å‘Š
LIGHTWEIGHTING_SUMMARY.md           # æ€»ç»“æŠ¥å‘Š
USAGE_GUIDE.md                      # ä½¿ç”¨æŒ‡å—
```

### é‡æ„çš„æ–‡ä»¶
```
src/web/routes.rs          # è·¯ç”±å¤§å¹…ç®€åŒ–
src/web/types.rs           # AppStateç»“æ„ç®€åŒ–
src/web/config.rs          # é…ç½®ç³»ç»Ÿç®€åŒ–
src/web/handlers/pages.rs  # é¡µé¢å¤„ç†å™¨é‡æ„
Cargo.toml                 # ä¾èµ–ç²¾ç®€
README.md                  # æ–‡æ¡£æ›´æ–°
CLAUDE.md                  # é¡¹ç›®æŒ‡å—æ›´æ–°
```

## ğŸ‰ é¡¹ç›®æˆæœ

### 1. è¾¾æˆæ ¸å¿ƒç›®æ ‡
- âœ… **ä¸“æ³¨æ ¸å¿ƒåŠŸèƒ½**: ä¹¦ç­¾è„šæœ¬é©±åŠ¨çš„ç½‘é¡µå¤„ç†
- âœ… **ç®€å•ä¾¿æ·**: ä¸€é”®æ“ä½œï¼Œæ— éœ€å¤æ‚é…ç½®
- âœ… **è½»é‡è®¾è®¡**: å¤§å¹…å‡å°‘èµ„æºå ç”¨å’Œå¤æ‚åº¦
- âœ… **å³å¼€å³ç”¨**: æ— éœ€æ•°æ®åº“ç­‰å¤–éƒ¨ä¾èµ–

### 2. ä¿æŒåŠŸèƒ½å®Œæ•´æ€§
- âœ… **èµ„æºå¤„ç†**: å®Œæ•´çš„HTMLã€CSSã€JSã€å›¾ç‰‡å¤„ç†èƒ½åŠ›
- âœ… **ç¿»è¯‘åŠŸèƒ½**: å¯é€‰çš„æ™ºèƒ½ç¿»è¯‘æ”¯æŒ
- âœ… **é¢„è§ˆå±•ç¤º**: ç¾è§‚çš„æ¨¡æ¿åŒ–é¢„è§ˆç•Œé¢
- âœ… **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ

### 3. æŠ€æœ¯æ¶æ„ä¼˜åŒ–
- âœ… **æ¨¡å—åŒ–è®¾è®¡**: æ¸…æ™°çš„æ¨¡å—åˆ†ç¦»å’ŒèŒè´£åˆ’åˆ†
- âœ… **å¼‚æ­¥å¤„ç†**: é«˜æ•ˆçš„å¼‚æ­¥ä»»åŠ¡å¤„ç†
- âœ… **ç±»å‹å®‰å…¨**: Rustç±»å‹ç³»ç»Ÿç¡®ä¿ä»£ç å®‰å…¨
- âœ… **å¯æ‰©å±•æ€§**: ä¿æŒè‰¯å¥½çš„æ‰©å±•æ€§è®¾è®¡

## ğŸš€ ä½¿ç”¨ä½“éªŒ

### å¼€å‘è€…ä½“éªŒ
```bash
# å¯åŠ¨æœåŠ¡ï¼ˆç®€å•ï¼‰
cargo run --bin monolith-web --features="web"

# è®¿é—®ä¸»é¡µ
http://localhost:7080

# å®‰è£…ä¹¦ç­¾å¹¶å¼€å§‹ä½¿ç”¨
```

### ç”¨æˆ·ä½“éªŒ
1. **è·å–ä¹¦ç­¾**: è®¿é—®ä¸»é¡µï¼Œæ‹–æ‹½ä¹¦ç­¾åˆ°ä¹¦ç­¾æ 
2. **ä¸€é”®ä½¿ç”¨**: åœ¨ä»»æ„ç½‘é¡µç‚¹å‡»ä¹¦ç­¾
3. **å³æ—¶é¢„è§ˆ**: è‡ªåŠ¨è·³è½¬åˆ°å¤„ç†ç»“æœé¡µé¢

### éƒ¨ç½²ä½“éªŒ
- **æ— å¤–éƒ¨ä¾èµ–**: ä¸éœ€è¦æ•°æ®åº“ã€Redisç­‰å¤–éƒ¨æœåŠ¡
- **å•ä¸€äºŒè¿›åˆ¶**: ç¼–è¯‘åå³å¯ç›´æ¥è¿è¡Œ
- **é…ç½®ç®€å•**: ä»…éœ€å°‘é‡ç¯å¢ƒå˜é‡é…ç½®

## ğŸ”® æœªæ¥å‘å±•æ–¹å‘

### çŸ­æœŸä¼˜åŒ– (1-2å‘¨)
- [ ] å¢å¼ºé¢„è§ˆé¡µé¢çš„äº¤äº’æ€§
- [ ] æ·»åŠ æ›´å¤šè‡ªå®šä¹‰å¤„ç†é€‰é¡¹
- [ ] ä¼˜åŒ–é”™è¯¯é¡µé¢ç”¨æˆ·ä½“éªŒ

### ä¸­æœŸå‘å±• (1-2ä¸ªæœˆ)
- [ ] æ”¯æŒæ‰¹é‡URLå¤„ç†
- [ ] æ·»åŠ åŸºç¡€ç›‘æ§å’Œå¥åº·æ£€æŸ¥
- [ ] å¢åŠ æ›´å¤šç¿»è¯‘æœåŠ¡æä¾›å•†

### é•¿æœŸè§„åˆ’ (3-6ä¸ªæœˆ)
- [ ] æ’ä»¶åŒ–æ¶æ„æ”¯æŒ
- [ ] WebAssemblyé›†æˆ
- [ ] æ€§èƒ½ç›‘æ§é¢æ¿

## ğŸ† æ€»ç»“

Monolithè½»é‡åŒ–æ”¹é€ æ˜¯ä¸€æ¬¡**æˆåŠŸçš„æ¶æ„é‡æ„**ï¼š

1. **ç›®æ ‡æ˜ç¡®**: ä¸“æ³¨ä¹¦ç­¾è„šæœ¬å·¥ä½œæµï¼Œç§»é™¤éæ ¸å¿ƒåŠŸèƒ½
2. **æ‰§è¡Œå½»åº•**: è·¯ç”±å‡å°‘85%ï¼Œä¾èµ–å¤§å¹…ç²¾ç®€ï¼Œæ€§èƒ½æ˜¾è‘—æå‡
3. **ç”¨æˆ·ä¼˜å…ˆ**: ä»å¤æ‚çš„ç®¡ç†ç•Œé¢è½¬å‘ç®€å•çš„ä¸€é”®æ“ä½œ
4. **æŠ€æœ¯å…ˆè¿›**: ä¿æŒç°ä»£åŒ–çš„æŠ€æœ¯æ ˆå’Œæ¶æ„è®¾è®¡
5. **å¯æŒç»­**: ç®€åŒ–çš„ä»£ç åº“æ›´æ˜“ç»´æŠ¤å’Œæ‰©å±•

é¡¹ç›®æˆåŠŸå®ç°äº†"**ç®€å•ã€ä¾¿æ·ã€è½»é‡**"çš„è®¾è®¡ç›®æ ‡ï¼Œä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªé«˜æ•ˆã€æ˜“ç”¨çš„ç½‘é¡µå¤„ç†å·¥å…·ã€‚

---

**Monolith è½»é‡ç‰ˆ** - è®©ç½‘é¡µå¤„ç†å˜å¾—ç®€å•ï¼ ğŸš€